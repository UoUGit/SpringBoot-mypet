<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>회원 탈퇴</title>
</head>
<body>
    <div layout:fragment="content">
        <h1>회원 탈퇴</h1>
        <form id="deleteForm" th:action="@{/user/deleteAccount}" method="post">
            <label for="confirmPassword">비밀번호 확인:</label>
            <input type="password" id="confirmPassword" name="confirmPassword" required>
            <br>
            <input type="submit" value="탈퇴 요청" onclick="confirmDeletion(event)"> <!-- JS 함수 호출 -->
        </form>
        <div th:if="${errorMessage}" class="error-message">
            <p th:text="${errorMessage}"></p>
        </div>
        <div th:if="${successMessage}" class="success-message">
            <p th:text="${successMessage}"></p>
        </div>
    </div>

    <div layout:fragment="script">
        <script>
            // JS 함수 정의
            function confirmDeletion(event) {
                const confirmed = confirm("정말 탈퇴하시겠습니까?");
                if (!confirmed) {
                    event.preventDefault(); // 사용자가 '취소'를 클릭한 경우 폼 제출 막기
                }
            }
        </script>
    </div>
</body>
</html>
