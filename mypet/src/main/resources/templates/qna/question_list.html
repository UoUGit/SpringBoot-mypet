<html layout:decorate="~{layout}">
	<head>
	<link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
	<style>
	       .disabled-link {
	           pointer-events: none; /* 클릭 이벤트 무시 */
	           opacity: 0.6; /* 비활성화된 버튼 스타일 */
	       }
	   </style>
	</head>
	<div layout:fragment="content">
<table>
	<thead>
		<tr>
			<th>번호</th>
			<th>카테고리</th>
			<th>제목</th>
			<th>작성자</th>
			<th>작성일시</th>
		</tr>
	</thead>
	<tbody>
		<tr th:each="question, loop : ${paging}">
			<td th:text="${paging.getTotalElements - (paging.number * paging.size) - loop.index}"></td>
			<td th:text="${question.category}"></td>
			<td>
				<a th:href="@{|/qna_question/detail/${question.questionIdx}|}" th:text="${question.subject}"></a>
				<span class="text-danger small ms-2"
				      th:if="${#lists.size(question.answerList) > 0}"
				      th:text="'답변 완료'">
				</span>
			</td>
			<td><span th:if="${question.author != null}" th:text="${question.author.userId}"></span></td>
			<td th:text="${#temporals.format(question.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
		</tr>
	</tbody>
</table>
<!-- 페이징처리 시작 -->
 <div th:if="${!paging.isEmpty()}">
     <ul class="pagination justify-content-center">
         <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
             <a class="page-link"
                 th:href="@{|?page=${paging.number-1}|}">
                 <span>이전</span>
             </a>
         </li>
		 <li th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}" 
		                th:if="${page >= paging.number-5 and page <= paging.number+5}"
		                th:classappend="${page == paging.number} ? 'active'" 
		                class="page-item">
		                <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
		            </li>
         <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
             <a class="page-link" th:href="@{|?page=${paging.number+1}|}">
                 <span>다음</span>
             </a>
         </li>
     </ul>
 </div>
 <!-- 페이징처리 끝 -->
 <div>
     <!-- 질문 등록하기 버튼 -->
     <a id="createQuestionButton" th:href="@{/qna_question/create}" 
        sec:authorize="hasAuthority('USER')"
        class="btn btn-primary">
        질문 등록하기
     </a>

     <!-- 버튼 비활성화 스타일 -->
     <a id="createQuestionDisabledButton" th:href="@{/qna_question/create}" 
        sec:authorize="!hasAuthority('USER')"
        class="btn btn-primary disabled-link" 
        title="질문 등록은 USER 권한이 필요합니다.">
        질문 등록하기
     </a>
 </div>
</div>
</html>